{
  "$schema": "https://code.claude.com/schemas/settings.json",
  "description": "CCPM Plugin Hooks - Smart agent auto-invocation for optimal workflow",
  "hooks": {
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/scripts/smart-agent-selector.sh",
            "timeout": 5000,
            "description": "Smart agent selector: Dynamically discovers and scores all available agents"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "mcp__agent-mcp-gateway__execute_tool",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/scripts/linear-param-fixer.sh",
            "timeout": 2000,
            "description": "Linear parameter fixer: Catches issueId vs id mistakes before they fail"
          }
        ]
      }
    ]
  },
  "usage": {
    "installation": "This file is automatically applied when the CCPM plugin is installed",
    "customization": "Users can disable specific hooks in their project's .claude/settings.json",
    "optimization": "Using optimized hook prompts: 81.7% token reduction, <1s execution with caching"
  },
  "notes": {
    "smart_agent_selector": {
      "purpose": "Analyzes every user prompt to determine which agents should be invoked",
      "trigger": "UserPromptSubmit",
      "execution": "Before Claude starts responding",
      "output": "Injects agent invocation instructions into Claude's context",
      "performance": "Optimized version: 81.7% token reduction, <1s execution with caching",
      "features": [
        "Dynamic agent discovery from plugins and project",
        "Context-aware scoring (0-100+ points)",
        "Parallel vs sequential execution planning",
        "Caching for 85-95% faster subsequent runs",
        "+50 boost for linear-operations on Linear-related tasks"
      ]
    },
    "linear_param_fixer": {
      "purpose": "Catches and warns about common Linear MCP parameter mistakes",
      "trigger": "PreToolUse (mcp__agent-mcp-gateway__execute_tool)",
      "execution": "Before MCP tool execution",
      "output": "Warning message if wrong parameters detected (issueId vs id)",
      "problem_solved": "get_issue/update_issue use 'id', but create_comment uses 'issueId'",
      "features": [
        "Detects issueId used where id expected",
        "Detects id used where issueId expected",
        "Shows correct parameter format",
        "Prevents token waste from failed calls"
      ]
    }
  },
  "removed_hooks": {
    "tdd_enforcer": {
      "reason": "Removed in v1.0 for simplicity - developers manage their own testing workflow",
      "alternative": "Use /ccpm:verify for quality checks before finalizing tasks"
    },
    "quality_gate": {
      "reason": "Removed in v1.0 - integrated into /ccpm:verify command instead",
      "alternative": "Run /ccpm:verify to perform quality checks and code review"
    }
  }
}
