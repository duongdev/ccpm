# CCPM Decision Trees - Visual Reference

**Version:** 1.0.0
**Phase:** PSN-31 Phase 4

## Overview

This document provides visual decision tree diagrams for all major decision points in CCPM. Each tree shows:

- Decision nodes (what needs to be decided)
- Confidence levels (how certain we are)
- Actions (what we do based on confidence)
- User interactions (when we ask for input)

**Legend**:
- ğŸ”· **Decision Point** - A choice that needs to be made
- âœ… **High Confidence (80-100%)** - Proceed automatically
- âš ï¸ **Medium Confidence (50-79%)** - Proceed with user review
- âŒ **Low Confidence (0-49%)** - Always ask user
- ğŸ‘¤ **User Input Required** - Stop and ask
- ğŸ¤– **Automatic Action** - No user input needed

---

## 1. Command Routing Decision Tree

### `/ccpm:plan` - Smart Planning Command

```
                    USER: /ccpm:plan [arg1] [arg2]
                                 â”‚
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Parse Arguments       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   arg1 is empty?        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   YES                        NO
                    â”‚                          â”‚
                    â”‚                          â”‚
             â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚   âŒ ERROR   â”‚         â”‚  arg1 matches   â”‚
             â”‚             â”‚         â”‚  ISSUE_ID_      â”‚
             â”‚  Show usage â”‚         â”‚  PATTERN?       â”‚
             â”‚  hint       â”‚         â”‚  ([A-Z]+-\d+)   â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                YES                        NO
                                 â”‚                          â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  arg2 is empty?       â”‚   â”‚   âœ… CONFIDENCE:     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      90%             â”‚
                                 â”‚               â”‚                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   MODE: CREATE       â”‚
                   YES                        NOâ”‚   (new task)         â”‚
                    â”‚                          â”‚ â”‚                      â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”¤  ğŸ¤– Proceed to       â”‚
       â”‚  âœ… CONFIDENCE: 95%    â”‚  â”‚ âœ… CONFID-  â”‚â”‚  CREATE workflow    â”‚
       â”‚                        â”‚  â”‚    ENCE: 95%â”‚â”‚                      â”‚
       â”‚  MODE: PLAN            â”‚  â”‚             â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚  (plan existing)       â”‚  â”‚ MODE: UPDATEâ”‚
       â”‚                        â”‚  â”‚ (update     â”‚
       â”‚  ğŸ¤– Proceed to         â”‚  â”‚  existing)  â”‚
       â”‚  PLAN workflow         â”‚  â”‚             â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ ğŸ¤– Proceed  â”‚
                                   â”‚ but ASK     â”‚
                                   â”‚ clarifying  â”‚
                                   â”‚ questions   â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

EDGE CASE: arg1 = "PSN" or similar short pattern
           â”‚
           â”œâ”€ âš ï¸ CONFIDENCE: 40%
           â”‚
           â””â”€ ğŸ‘¤ ASK USER:
              "Did you mean to:
               1. Plan existing issue PSN
               2. Create new task with title 'PSN'"
```

### Confidence Calculation

```
Pattern Matching:
â”œâ”€ Exact ISSUE_ID_PATTERN match ([A-Z]+-\d+)
â”‚  â””â”€ Confidence: 95%
â”‚
â”œâ”€ Quoted string (CREATE mode indicator)
â”‚  â””â”€ Confidence: 90%
â”‚
â”œâ”€ Partial pattern (e.g., "PSN")
â”‚  â””â”€ Confidence: 40%
â”‚
â””â”€ Ambiguous input
   â””â”€ Confidence: 0%
```

---

## 2. State Transition Decision Tree

```
            USER ACTION: Move to next workflow phase
                         â”‚
                         â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Fetch current issue    â”‚
            â”‚  state from Linear      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  User provided explicit â”‚
            â”‚  target state?          â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           YES                        NO
            â”‚                          â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ âœ… CONFIDENCE:    â”‚   â”‚  Check workflow       â”‚
   â”‚    100%           â”‚   â”‚  configuration        â”‚
   â”‚                   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚ Validate state    â”‚               â”‚
   â”‚ is valid          â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                   â”‚   â”‚  How many valid next  â”‚
   â”‚ ğŸ¤– Use provided   â”‚   â”‚  states?              â”‚
   â”‚ state             â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          ONE                   MULTIPLE
                            â”‚                      â”‚
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚ âœ… CONFIDENCE: 90%     â”‚  â”‚ âš ï¸ CONFIDENCE:  â”‚
               â”‚                        â”‚  â”‚    50%          â”‚
               â”‚ Example:               â”‚  â”‚                 â”‚
               â”‚ Planning â†’ In Progress â”‚  â”‚ Example:        â”‚
               â”‚                        â”‚  â”‚ In Progress â†’   â”‚
               â”‚ ğŸ¤– Auto-transition     â”‚  â”‚   â€¢ In Review   â”‚
               â”‚ with display:          â”‚  â”‚   â€¢ Done        â”‚
               â”‚ "Moving to In Progress"â”‚  â”‚   â€¢ Blocked     â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                 â”‚
                                           â”‚ ğŸ‘¤ ASK USER:    â”‚
                                           â”‚ "Select next    â”‚
                                           â”‚  state:"        â”‚
                                           â”‚  [Show options] â”‚
                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SPECIAL CASE: Completion check
              â”‚
              â”œâ”€ Checklist 100% complete?
              â”‚  â”œâ”€ YES â†’ âœ… Confidence: 85% â†’ Suggest "Done"
              â”‚  â””â”€ NO â†’ âš ï¸ Confidence: 60% â†’ Ask user
              â”‚
              â””â”€ Tests all passing?
                 â”œâ”€ YES â†’ âœ… Confidence: 80%
                 â””â”€ NO â†’ âŒ Confidence: 0% â†’ BLOCK
```

### State Transition Matrix

```
Current State    â”‚ Default Next â”‚ Confidence â”‚ Alternatives
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Backlog          â”‚ Planning     â”‚ 90%        â”‚ In Progress, Cancelled
Planning         â”‚ In Progress  â”‚ 90%        â”‚ Backlog, Cancelled
In Progress      â”‚ In Review    â”‚ 70%        â”‚ Done, Blocked, Planning
Blocked          â”‚ In Progress  â”‚ 85%        â”‚ Cancelled
In Review        â”‚ Done         â”‚ 80%        â”‚ In Progress (changes)
Done             â”‚ (terminal)   â”‚ N/A        â”‚ In Progress (reopen)
Cancelled        â”‚ (terminal)   â”‚ N/A        â”‚ Backlog (revive)
```

---

## 3. External System Write Decision Tree

```
        USER: "Update Jira" / "Post to Slack" / "Update Confluence"
                              â”‚
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  ğŸš¨ SAFETY RULES CHECK  â”‚
                 â”‚                          â”‚
                 â”‚  CONFIDENCE: 0%          â”‚
                 â”‚  (ALWAYS ASK)            â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  Build write preview:   â”‚
                 â”‚  â€¢ Target system        â”‚
                 â”‚  â€¢ Target location      â”‚
                 â”‚  â€¢ Exact content        â”‚
                 â”‚  â€¢ Action type          â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  ğŸ‘¤ DISPLAY PREVIEW:    â”‚
                 â”‚                          â”‚
                 â”‚  ğŸš¨ CONFIRMATION REQUIREDâ”‚
                 â”‚                          â”‚
                 â”‚  I will [action] to     â”‚
                 â”‚  [system]:              â”‚
                 â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
                 â”‚  [exact content]        â”‚
                 â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
                 â”‚                          â”‚
                 â”‚  Proceed? (yes/no)      â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  Wait for user input    â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                YES                        NO/OTHER
                 â”‚                          â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  âœ… Execute write      â”‚  â”‚  âŒ Cancel operation   â”‚
    â”‚                        â”‚  â”‚                        â”‚
    â”‚  Log action to Linear  â”‚  â”‚  Log cancellation      â”‚
    â”‚  comment               â”‚  â”‚                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  Return without change â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ACCEPTABLE CONFIRMATIONS:
â”œâ”€ "yes"
â”œâ”€ "confirm"
â”œâ”€ "go ahead"
â”œâ”€ "proceed"
â””â”€ "do it"

REJECTION (ANY OTHER RESPONSE):
â”œâ”€ "no"
â”œâ”€ "skip"
â”œâ”€ "cancel"
â”œâ”€ (empty)
â””â”€ (anything else)
```

### Safety Categories

```
System Type â”‚ Write Operations â”‚ Confidence â”‚ Policy
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Linear      â”‚ All operations   â”‚ Varies     â”‚ Internal tracking
            â”‚                  â”‚            â”‚ (mostly automatic)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
GitHub      â”‚ PR creation      â”‚ 90%        â”‚ Auto with preview
            â”‚ PR comments      â”‚ 0%         â”‚ Always ask
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Jira        â”‚ Status updates   â”‚ 0%         â”‚ Always ask
            â”‚ Comments         â”‚ 0%         â”‚ Always ask
            â”‚ Field updates    â”‚ 0%         â”‚ Always ask
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Confluence  â”‚ Page creation    â”‚ 0%         â”‚ Always ask
            â”‚ Page updates     â”‚ 0%         â”‚ Always ask
            â”‚ Comments         â”‚ 0%         â”‚ Always ask
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Slack       â”‚ Messages         â”‚ 0%         â”‚ Always ask
            â”‚ Reactions        â”‚ 0%         â”‚ Always ask
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
BitBucket   â”‚ PR creation      â”‚ 0%         â”‚ Always ask
            â”‚ Comments         â”‚ 0%         â”‚ Always ask
```

---

## 4. Checklist Update Decision Tree

```
            /ccpm:sync - Detect completed checklist items
                              â”‚
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  Fetch issue with       â”‚
                 â”‚  checklist from Linear  â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  Detect git changes:    â”‚
                 â”‚  â€¢ Modified files       â”‚
                 â”‚  â€¢ Added files          â”‚
                 â”‚  â€¢ Deleted files        â”‚
                 â”‚  â€¢ Insertions/deletions â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  Extract unchecked      â”‚
                 â”‚  items from description â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  SCORE EACH ITEM (0-100 points):          â”‚
        â”‚                                            â”‚
        â”‚  â€¢ File path keyword match: +30           â”‚
        â”‚  â€¢ File name exact match: +40             â”‚
        â”‚  â€¢ Large changes (50+ lines): +10         â”‚
        â”‚  â€¢ Large changes (100+ lines): +20        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  Categorize by score:   â”‚
                 â”‚                          â”‚
                 â”‚  â€¢ High: 50-100 (70%+)  â”‚
                 â”‚  â€¢ Medium: 30-49 (50-69%)â”‚
                 â”‚  â€¢ Low: 0-29 (0-49%)    â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ğŸ‘¤ INTERACTIVE SELECTION:                 â”‚
        â”‚                                            â”‚
        â”‚  Which items did you complete?            â”‚
        â”‚                                            â”‚
        â”‚  âœ… Item 1: Implement auth (ğŸ¤– SUGGESTED) â”‚
        â”‚  âœ… Item 2: Add login form (ğŸ¤– SUGGESTED) â”‚
        â”‚  â˜  Item 3: Write tests (ğŸ’¡ Possible)     â”‚
        â”‚  â˜  Item 4: Update docs                   â”‚
        â”‚                                            â”‚
        â”‚  [User can check/uncheck any item]        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  User selections:       â”‚
                 â”‚  â€¢ Items 1, 2, 3        â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  âœ… Update Linear issue â”‚
                 â”‚  description with       â”‚
                 â”‚  checked items          â”‚
                 â”‚                          â”‚
                 â”‚  Add progress comment   â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SCORING EXAMPLES:

Item: "Implement JWT authentication"
Changes: auth.ts (+127 lines), jwt-helper.ts (+45 lines)
â”œâ”€ Keyword match "auth" in auth.ts: +30
â”œâ”€ Keyword match "jwt" in jwt-helper.ts: +30
â”œâ”€ Large changes 100+ lines: +20
â””â”€ TOTAL: 80 points (HIGH CONFIDENCE)

Item: "Write tests"
Changes: auth.ts (+127 lines)
â”œâ”€ No test files changed: 0
â”œâ”€ No keyword match: 0
â””â”€ TOTAL: 0 points (LOW CONFIDENCE - DO NOT pre-select)

Item: "Update documentation"
Changes: README.md (+23 lines)
â”œâ”€ Keyword match "README" or "doc": +30
â”œâ”€ Small changes: 0
â””â”€ TOTAL: 30 points (MEDIUM CONFIDENCE - suggest but don't pre-select)
```

### Confidence Thresholds

```
Score Range â”‚ Confidence â”‚ UI Treatment        â”‚ Auto-Select?
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
70-100      â”‚ High (70%) â”‚ âœ… Pre-checked      â”‚ YES
50-69       â”‚ Med (60%)  â”‚ ğŸ’¡ Suggested        â”‚ NO
30-49       â”‚ Med (50%)  â”‚ ğŸ’¡ Possible match   â”‚ NO
0-29        â”‚ Low (0%)   â”‚ â˜  Available        â”‚ NO
```

---

## 5. Project Detection Decision Tree

```
              COMMAND: Requires project context
                              â”‚
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  User provided explicit â”‚
                 â”‚  project argument?      â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                YES                        NO
                 â”‚                          â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  âœ… CONFIDENCE: 100%   â”‚  â”‚  Invoke project-       â”‚
    â”‚                        â”‚  â”‚  context-manager       â”‚
    â”‚  Load specified        â”‚  â”‚  agent for auto-       â”‚
    â”‚  project config        â”‚  â”‚  detection             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                           â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚  Agent analyzes:        â”‚
               â”‚  â€¢ Git remote URL       â”‚
               â”‚  â€¢ Current directory    â”‚
               â”‚  â€¢ Subdirectory patternsâ”‚
               â”‚  â€¢ .ccpm config         â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚  How many matches?      â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                  â”‚                   â”‚
       ZERO                ONE              MULTIPLE
         â”‚                  â”‚                   â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ âŒ ERROR  â”‚  â”‚ âœ… CONFIDENCE:   â”‚  â”‚ âš ï¸ CONFIDENCE:  â”‚
    â”‚          â”‚  â”‚    95%           â”‚  â”‚    60%          â”‚
    â”‚ "No proj-â”‚  â”‚                  â”‚  â”‚                 â”‚
    â”‚  ect     â”‚  â”‚ Display:         â”‚  â”‚ Example:        â”‚
    â”‚  found"  â”‚  â”‚ "ğŸ“Œ Project:     â”‚  â”‚ Monorepo with:  â”‚
    â”‚          â”‚  â”‚  my-app"         â”‚  â”‚ â€¢ frontend/     â”‚
    â”‚ Suggest: â”‚  â”‚                  â”‚  â”‚ â€¢ backend/      â”‚
    â”‚ â€¢ Specifyâ”‚  â”‚ Use detected     â”‚  â”‚ â€¢ mobile/       â”‚
    â”‚ â€¢ Config â”‚  â”‚ project          â”‚  â”‚                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ ğŸ‘¤ ASK USER:    â”‚
                                        â”‚ "Multiple       â”‚
                                        â”‚  projects       â”‚
                                        â”‚  detected.      â”‚
                                        â”‚  Select one:"   â”‚
                                        â”‚  [List options] â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MONOREPO SUBDIRECTORY DETECTION:

Current path: /repo/frontend/src
              â”‚
              â”œâ”€ Check for subdirectory patterns
              â”‚
              â””â”€ Match: "frontend" subdirectory configured
                 â”‚
                 â”œâ”€ âœ… CONFIDENCE: 90%
                 â”‚
                 â””â”€ Display: "ğŸ“Œ Project: my-monorepo â€º frontend"
```

### Detection Priority

```
Priority â”‚ Source              â”‚ Confidence â”‚ Example
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1        â”‚ Explicit argument   â”‚ 100%       â”‚ /ccpm:plan "title" my-app
2        â”‚ Git remote URL      â”‚ 95%        â”‚ github.com/user/my-app
3        â”‚ Subdirectory match  â”‚ 90%        â”‚ /monorepo/frontend
4        â”‚ Directory path      â”‚ 85%        â”‚ /projects/my-app
5        â”‚ .ccpm config        â”‚ 90%        â”‚ .ccpm/config.json
```

---

## 6. Verification Completion Gate Decision Tree

```
              USER: /ccpm:verify or /ccpm:done
                              â”‚
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  PRE-FLIGHT CHECKS:     â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                    â”‚                    â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚ Checklistâ”‚    â”‚ Uncommitted      â”‚    â”‚ Git      â”‚
    â”‚ complete?â”‚    â”‚ changes?         â”‚    â”‚ pushed?  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚
         NO                   YES                  NO
         â”‚                    â”‚                    â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ âŒ BLOCK       â”‚    â”‚ âŒ BLOCK       â”‚   â”‚ âŒ BLOCK    â”‚
    â”‚               â”‚    â”‚               â”‚   â”‚            â”‚
    â”‚ "Cannot verifyâ”‚    â”‚ "Commit       â”‚   â”‚ "Push      â”‚
    â”‚  X/Y items    â”‚    â”‚  changes      â”‚   â”‚  branch    â”‚
    â”‚  incomplete"  â”‚    â”‚  first"       â”‚   â”‚  first"    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         YES                  NO                   YES
         â”‚                    â”‚                    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  âœ… All checks pass     â”‚
                 â”‚                          â”‚
                 â”‚  CONFIDENCE: 90%         â”‚
                 â”‚                          â”‚
                 â”‚  Proceed to verificationâ”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  RUN VERIFICATION:      â”‚
                 â”‚  â€¢ Tests                â”‚
                 â”‚  â€¢ Linting              â”‚
                 â”‚  â€¢ Type checking        â”‚
                 â”‚  â€¢ Code review          â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  Collect results        â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                    â”‚                    â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
  â”‚ CRITICAL    â”‚   â”‚ MINOR ISSUES      â”‚   â”‚ NO ISSUES  â”‚
  â”‚ ISSUES      â”‚   â”‚                   â”‚   â”‚            â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ âŒ BLOCK       â”‚   â”‚ âš ï¸ CONFIDENCE: 70% â”‚   â”‚ âœ… CONFID- â”‚
    â”‚               â”‚   â”‚                    â”‚   â”‚    ENCE:   â”‚
    â”‚ "Cannot       â”‚   â”‚ Examples:          â”‚   â”‚    95%     â”‚
    â”‚  complete:    â”‚   â”‚ â€¢ Style violations â”‚   â”‚            â”‚
    â”‚  Critical     â”‚   â”‚ â€¢ Missing comments â”‚   â”‚ Mark as    â”‚
    â”‚  issues"      â”‚   â”‚ â€¢ TODOs            â”‚   â”‚ verified   â”‚
    â”‚               â”‚   â”‚                    â”‚   â”‚            â”‚
    â”‚ Invoke:       â”‚   â”‚ ğŸ‘¤ ASK USER:       â”‚   â”‚ Auto-      â”‚
    â”‚ /ccpm:verify- â”‚   â”‚ "Found X minor     â”‚   â”‚ transition â”‚
    â”‚ :fix          â”‚   â”‚  issues. Proceed?" â”‚   â”‚ to Done    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Issue Severity Classification

```
Severity   â”‚ Examples                  â”‚ Blocking? â”‚ Confidence
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
CRITICAL   â”‚ â€¢ Tests failing           â”‚ YES       â”‚ 100%
           â”‚ â€¢ Build errors            â”‚           â”‚
           â”‚ â€¢ Type errors             â”‚           â”‚
           â”‚ â€¢ Security vulnerabilitiesâ”‚           â”‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
MAJOR      â”‚ â€¢ Lint errors             â”‚ YES       â”‚ 95%
           â”‚ â€¢ Missing required tests  â”‚           â”‚
           â”‚ â€¢ Unhandled edge cases    â”‚           â”‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
MINOR      â”‚ â€¢ Style violations        â”‚ ASK       â”‚ 70%
           â”‚ â€¢ Missing comments        â”‚           â”‚
           â”‚ â€¢ TODO comments           â”‚           â”‚
           â”‚ â€¢ Console.log statements  â”‚           â”‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SUGGESTION â”‚ â€¢ Code could be cleaner   â”‚ NO        â”‚ 50%
           â”‚ â€¢ Performance tips        â”‚           â”‚
           â”‚ â€¢ Best practice notes     â”‚           â”‚
```

---

## 7. Agent Selection Decision Tree

```
              COMMAND: Requires agent invocation
                              â”‚
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  Invoke smart-agent-    â”‚
                 â”‚  selector hook          â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  Analyze context:       â”‚
                 â”‚  â€¢ User request         â”‚
                 â”‚  â€¢ Task type            â”‚
                 â”‚  â€¢ Tech stack           â”‚
                 â”‚  â€¢ File patterns        â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  Score all agents       â”‚
                 â”‚  (0-100+ points)        â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  Get highest score      â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                    â”‚                    â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
  â”‚ SCORE > 70  â”‚   â”‚ SCORE 40-70       â”‚   â”‚ SCORE < 40 â”‚
  â”‚             â”‚   â”‚                   â”‚   â”‚            â”‚
  â”‚ âœ… HIGH     â”‚   â”‚ âš ï¸ MEDIUM         â”‚   â”‚ âŒ LOW     â”‚
  â”‚ CONFIDENCE  â”‚   â”‚ CONFIDENCE        â”‚   â”‚ CONFIDENCE â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Invoke agent  â”‚   â”‚ ğŸ‘¤ ASK USER:       â”‚   â”‚ Use generalâ”‚
    â”‚ automatically â”‚   â”‚ "Suggested agent:  â”‚   â”‚ purpose    â”‚
    â”‚               â”‚   â”‚  [name]            â”‚   â”‚ agent      â”‚
    â”‚ Display:      â”‚   â”‚                    â”‚   â”‚            â”‚
    â”‚ "ğŸ¤– Using     â”‚   â”‚  Confidence: X%    â”‚   â”‚ Display:   â”‚
    â”‚  [agent]"     â”‚   â”‚                    â”‚   â”‚ "âš ï¸  Could  â”‚
    â”‚               â”‚   â”‚  Proceed?"         â”‚   â”‚  not find  â”‚
    â”‚               â”‚   â”‚                    â”‚   â”‚  specific  â”‚
    â”‚               â”‚   â”‚  [Show details]"   â”‚   â”‚  agent"    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SCORING ALGORITHM:

Base Score:
â”œâ”€ +10 per keyword match (request vs agent description)
â”œâ”€ +20 for task type match (implementation, debugging, review)
â”œâ”€ +15 for tech stack match (React agent for React project)
â”œâ”€ +5 for plugin agents (more specialized)
â””â”€ +25 for project-specific agents (HIGHEST PRIORITY)

Examples:

Request: "Add React authentication"
Agent: "frontend-developer" (React, auth keywords)
â”œâ”€ Keyword "React": +10
â”œâ”€ Keyword "auth": +10
â”œâ”€ Task type "implementation": +20
â”œâ”€ Tech stack "React": +15
â””â”€ TOTAL: 55 points (MEDIUM - suggest to user)

Request: "Fix Linear API integration"
Agent: "linear-operations" (project-specific)
â”œâ”€ Keyword "Linear": +10
â”œâ”€ Keyword "API": +10
â”œâ”€ Task type "debugging": +20
â”œâ”€ Project-specific: +25
â””â”€ TOTAL: 65 points (MEDIUM-HIGH - proceed)
```

---

## 8. Commit Type Detection Decision Tree

```
              /ccpm:commit - Generate conventional commit
                              â”‚
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  Analyze git changes:   â”‚
                 â”‚  â€¢ Modified files       â”‚
                 â”‚  â€¢ Added files          â”‚
                 â”‚  â€¢ Issue description    â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                    â”‚                    â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚ New      â”‚    â”‚ Bug fix           â”‚    â”‚ Docs     â”‚
    â”‚ feature? â”‚    â”‚ pattern?          â”‚    â”‚ only?    â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Files:        â”‚    â”‚ Files:        â”‚   â”‚ Files:     â”‚
    â”‚ â€¢ new feature â”‚    â”‚ â€¢ fixes/      â”‚   â”‚ â€¢ *.md     â”‚
    â”‚   code        â”‚    â”‚ â€¢ bug fixes/  â”‚   â”‚ â€¢ docs/    â”‚
    â”‚ â€¢ tests       â”‚    â”‚               â”‚   â”‚            â”‚
    â”‚               â”‚    â”‚ Description:  â”‚   â”‚ No code    â”‚
    â”‚ Issue has     â”‚    â”‚ â€¢ "fix"       â”‚   â”‚ changes    â”‚
    â”‚ "feature"     â”‚    â”‚ â€¢ "bug"       â”‚   â”‚            â”‚
    â”‚ label         â”‚    â”‚ â€¢ "issue"     â”‚   â”‚            â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ âœ… CONFIDENCE: â”‚    â”‚ âœ… CONFIDENCE: â”‚   â”‚ âœ… CONFID: â”‚
    â”‚    75%         â”‚    â”‚    80%         â”‚   â”‚    90%     â”‚
    â”‚                â”‚    â”‚                â”‚   â”‚            â”‚
    â”‚ TYPE: feat     â”‚    â”‚ TYPE: fix      â”‚   â”‚ TYPE: docs â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                     â”‚                    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Extract scope from     â”‚
                  â”‚  issue title:           â”‚
                  â”‚                          â”‚
                  â”‚  "Add user auth" â†’      â”‚
                  â”‚  scope: "auth"          â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Build commit message:  â”‚
                  â”‚                          â”‚
                  â”‚  <type>(<scope>):       â”‚
                  â”‚  <description>          â”‚
                  â”‚                          â”‚
                  â”‚  Example:               â”‚
                  â”‚  feat(auth): add JWT    â”‚
                  â”‚              validation â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  ğŸ‘¤ SHOW PREVIEW:       â”‚
                  â”‚                          â”‚
                  â”‚  "Commit message:"      â”‚
                  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
                  â”‚  [generated message]    â”‚
                  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
                  â”‚                          â”‚
                  â”‚  "Proceed or edit?"     â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AMBIGUOUS CASE: Cannot determine type

                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ âŒ CONFID: â”‚
                  â”‚    40%     â”‚
                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  ğŸ‘¤ ASK USER:            â”‚
          â”‚                          â”‚
          â”‚  "Select commit type:"   â”‚
          â”‚  â€¢ feat (new feature)    â”‚
          â”‚  â€¢ fix (bug fix)         â”‚
          â”‚  â€¢ docs (documentation)  â”‚
          â”‚  â€¢ refactor (code reorg) â”‚
          â”‚  â€¢ test (add tests)      â”‚
          â”‚  â€¢ chore (maintenance)   â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Type Detection Patterns

```
Type       â”‚ File Patterns       â”‚ Keywords        â”‚ Confidence
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
feat       â”‚ New .ts/.tsx files  â”‚ "add", "new",   â”‚ 75%
           â”‚ New components      â”‚ "implement"     â”‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
fix        â”‚ Modify existing     â”‚ "fix", "bug",   â”‚ 80%
           â”‚ No new files        â”‚ "issue", "solve"â”‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
docs       â”‚ Only *.md files     â”‚ "document",     â”‚ 90%
           â”‚ Only docs/ folder   â”‚ "readme"        â”‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
refactor   â”‚ Modify many files   â”‚ "refactor",     â”‚ 70%
           â”‚ No new features     â”‚ "restructure"   â”‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
test       â”‚ Only test files     â”‚ "test", "spec"  â”‚ 85%
           â”‚ *. test.ts, *.spec.tsâ”‚               â”‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
chore      â”‚ Config files        â”‚ "update deps",  â”‚ 75%
           â”‚ package.json        â”‚ "config"        â”‚
```

---

## Summary

These decision trees provide:

1. **Visual clarity** - Easy to understand decision flow
2. **Confidence levels** - When to ask vs proceed
3. **User interaction points** - Clearly marked ğŸ‘¤
4. **Automatic actions** - Clearly marked ğŸ¤–
5. **Error handling** - Blocked states marked âŒ

**Usage**:
- Command developers: Reference when implementing decisions
- Documentation: Link from command docs to relevant trees
- Training: Help users understand CCPM behavior

**Key Principles**:
- âœ… High confidence (80%+) â†’ Proceed automatically
- âš ï¸ Medium confidence (50-79%) â†’ Suggest and confirm
- âŒ Low confidence (0-49%) â†’ Always ask
- ğŸš¨ Safety rules â†’ ALWAYS confirm external writes

---

**Related Documents**:
- [Decision Framework](./decision-framework.md)
- [Safety Rules](../../commands/SAFETY_RULES.md)
- [Interactive Mode Guide](../guides/interactive-mode.md)
